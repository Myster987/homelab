apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata:
    name: cluster-issuer
    namespace: flux-system
spec:
    interval: 30m
    path: ./manifests/infrastructure/cluster-issuer
    prune: true
    sourceRef:
        kind: GitRepository
        name: flux-system
    decryption:
        provider: sops
        secretRef:
            name: sops-age

    healthChecks:
        - apiVersion: helm.toolkit.fluxcd.io/v2beta1
          kind: HelmRelease
          name: cert-manager
          namespace: cert-manager
